<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bp-listings Demo</title>
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%23000'/%3E%3Cpath d='M18 20h28v24H18z' fill='white'/%3E%3Cpath d='M24 16h16v8H24z' fill='%23000'/%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="./listings-map.css" />
    <style>
      :root {
        color-scheme: light;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background:
          radial-gradient(circle at top left, rgba(0, 0, 0, 0.08), transparent 30%),
          radial-gradient(circle at bottom right, rgba(64, 64, 64, 0.08), transparent 26%),
          #f5f5f5;
        color: #111111;
      }

      .demo-shell {
        width: min(1200px, calc(100vw - 32px));
        margin: 0 auto;
        padding: 64px 0 80px;
      }

      .demo-kicker {
        margin: 0 0 10px;
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: #404040;
      }

      .demo-title {
        margin: 0;
        font-size: clamp(2.5rem, 6vw, 4.25rem);
        line-height: 0.95;
      }

      .demo-copy {
        max-width: 760px;
        margin: 18px 0 32px;
        color: #525252;
        font-size: 18px;
        line-height: 1.6;
      }

      #widget-demo {
        width: 100%;
        height: min(78vh, 840px);
        min-height: 680px;
        border: 1px solid #d4d4d4;
        border-radius: 28px;
        overflow: hidden;
        background: #ffffff;
        box-shadow: 0 24px 60px -42px rgba(0, 0, 0, 0.42);
      }

      .demo-pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        border: 1px solid #d4d4d4;
        border-radius: 999px;
        background: #ffffff;
        font-size: 14px;
        font-weight: 500;
        color: #111111;
        box-shadow: 0 16px 30px -28px rgba(0, 0, 0, 0.35);
      }

      .demo-log {
        margin-top: 28px;
        padding: 20px;
        border: 1px solid #d4d4d4;
        border-radius: 24px;
        background: rgba(255, 255, 255, 0.92);
        box-shadow: 0 18px 48px -38px rgba(0, 0, 0, 0.42);
      }

      .demo-log h2 {
        margin: 0 0 10px;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: #525252;
      }

      .demo-log pre {
        margin: 0;
        white-space: pre-wrap;
        word-break: break-word;
        font-size: 14px;
        color: #111111;
      }

      @media (max-width: 768px) {
        .demo-shell {
          width: min(100%, calc(100vw - 24px));
          padding: 40px 0 56px;
        }

        .demo-copy {
          font-size: 16px;
        }

        #widget-demo {
          height: min(72vh, 760px);
          min-height: 620px;
        }
      }
    </style>
  </head>
  <body>
    <main class="demo-shell">
      <p class="demo-kicker">Demo</p>
      <h1 class="demo-title">Listings and map, packaged.</h1>
      <p class="demo-copy">
        This page uses the standalone <code>ListingsMap</code> widget with local source files and
        a simple search-slot placeholder so the root demo matches the other BP library entry pages.
      </p>
      <div id="widget-demo"></div>
      <section class="demo-log">
        <h2>Latest event</h2>
        <pre id="demo-output">Interact with the widget to see callback payloads.</pre>
      </section>
    </main>

    <script src="./listings-map.js"></script>
    <script>
      const output = document.querySelector('#demo-output');

      const writeOutput = (label, payload) => {
        output.textContent = `${label}\n${JSON.stringify(payload, null, 2)}`;
      };

      const listings = [
        {
          id: 'villa-ocean',
          title: 'Ocean-view villa in Batangas',
          subtitle: 'Entire villa · 4 beds',
          details: 'Private pool · 6 guests · 3 baths',
          dates: 'Mar 12 - Mar 16',
          price: 21450,
          pricePeriod: 'for 4 nights',
          lat: 13.7565,
          lng: 120.9414,
          rating: 4.96,
          reviewCount: 118,
          badge: 'Guest favorite',
          favorited: true,
          images: [
            'https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1494526585095-c41746248156?auto=format&fit=crop&w=1200&q=80',
          ],
        },
        {
          id: 'cabin-ridge',
          title: 'Ridge cabin outside Tagaytay',
          subtitle: 'Entire cabin · 2 bedrooms',
          details: 'Fire pit · 4 guests · 1 bath',
          dates: 'Apr 4 - Apr 7',
          price: 11800,
          pricePeriod: 'for 3 nights',
          lat: 14.1153,
          lng: 120.9625,
          rating: 4.91,
          reviewCount: 76,
          badge: 'Superhost',
          images: [
            'https://images.unsplash.com/photo-1448630360428-65456885c650?auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?auto=format&fit=crop&w=1200&q=80',
          ],
        },
        {
          id: 'loft-city',
          title: 'City loft in Makati',
          subtitle: 'Entire loft · 1 bedroom',
          details: 'Gym access · 2 guests · 1 bath',
          dates: 'May 1 - May 5',
          price: 9800,
          pricePeriod: 'for 4 nights',
          lat: 14.5547,
          lng: 121.0244,
          rating: 4.88,
          reviewCount: 203,
          badge: 'Minimum stay: 2 nights',
          images: [
            'https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?auto=format&fit=crop&w=1200&q=80',
            'https://images.unsplash.com/photo-1494526585095-c41746248156?auto=format&fit=crop&w=1200&q=80',
          ],
        },
      ];

      const widget = window.ListingsMap.init({
        container: '#widget-demo',
        currency: '₱',
        mapOptions: { center: [14.33, 121.0], zoom: 9 },
        pageSize: 4,
        listings,
        renderSearchSlot: (container) => {
          const pill = document.createElement('div');
          pill.className = 'demo-pill';
          pill.textContent = 'Search slot placeholder';
          container.appendChild(pill);
        },
        onFavorite: (listing, isFavorited) => {
          writeOutput('favorite', { id: listing.id, isFavorited });
        },
        onListingClick: (listing) => {
          writeOutput('listing-click', { id: listing.id, title: listing.title });
        },
        onMapMoveEnd: (payload) => {
          writeOutput('map-move', payload);
        },
      });

      window.demoWidget = widget;
    </script>
  </body>
</html>
